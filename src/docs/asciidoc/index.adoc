= MASJIB 기술명세서
:doctype: book
:icons: font
:source-highlighter: highlightjs
:toc: left
:toclevels: 4
:sectnums:
:sectlinks:
:sectanchors:

ifndef::snippets[]
:snippets: ./build/generated-snippets
endif::[]



= Member API

== 멤버 닉네임 변경 API
* 등록된 멤버의 닉네임 변경 시 사용하는 API 입니다.

=== 닉네임 변경 성공 시
==== Request
include::{snippets}/member/nickname/modify/success/path-parameters.adoc[]
include::{snippets}/member/nickname/modify/success/http-request.adoc[]
==== Response
include::{snippets}/member/nickname/modify/success/http-response.adoc[]
* 변경된 멤버의 닉네임을 출력합니다.

=== 닉네임 중복 시
==== Request
* 닉네임 변경과 동일한 파라미터를 사용한 api 요청입니다.

==== Response
include::{snippets}/member/nickname/modify/failure/http-response.adoc[]
* 중복된 닉네임의 경우 '중복된 닉네임입니다.'를 출력합니다.

== 멤버 닉네임 가져오기 API
* 등록된 멤버의 닉네임을 가져오는 API 입니다.

=== 가져오기 성공 시

==== Request
* SecurityContextHolder에 등록된 Authentication 객체의 email를 사용해 조회하기 때문에 별다른 파라미터가 필요하지 않습니다.

include::{snippets}/member/info/http-request.adoc[]

==== Response
include::{snippets}/member/info/http-response.adoc[]
* 등록된 멤버의 닉네임을 리턴합니다.

= Review API
== 리뷰 등록 API
* 등록된 리뷰를 조회하는 API 입니다.

=== Request-Field
include::{snippets}/review/create/request-fields.adoc[]
- 리뷰 정보를 입력합니다.
- 리뷰 등록 시 사진은 필수값이 아닙니다.
- 리뷰의 사진이 1000 x 1000을 넘을 경우 비율을 유지한 체 크기를 줄여서 저장합니다.

=== Request
include::{snippets}/review/create/http-request.adoc[]
- content-type : mutipart/form-data 설정

=== Response
include::{snippets}/review/create/http-response.adoc[]

== 리뷰 조회 API
=== Request
include::{snippets}/review/list/http-request.adoc[]
- 등록된 사용자의 리뷰를 조회합니다.

=== Response
include::{snippets}/review/list/http-response.adoc[]
- 생성 시간을 기준으로 오름차순합니다.

== 리뷰 삭제 API
* 리뷰를 삭제할 때 사용하는 API 입니다.

=== 리뷰 삭제 성공 시
==== Request
include::{snippets}/review/delete/success/http-request.adoc[]
==== Parameter
include::{snippets}/review/delete/success/query-parameters.adoc[]
- List 형태로써 삭제하고 싶은 id를 넣어주면 됩니다.

==== Response
include::{snippets}/review/delete/success/response-body.adoc[]

=== 리뷰 삭제 실패 시
==== Request
include::{snippets}/review/delete/failure/http-request.adoc[]
==== Response
include::{snippets}/review/delete/failure/response-body.adoc[]
* 리뷰가 삭제되지 않는 경우
- 리뷰 id를 선택하지 않았을 때
- 선택한 리뷰가 존재하지 않을 때


= Shop API
== 음식점 조회 API
=== 반경 1km 내 정렬 조회 API
* 내 주변 1km 내 음식점을 정렬 기준을 통회 조회하는 API 입니다.

==== Request

include::{snippets}/shop/radius/sort/http-request.adoc[]

==== 정렬 기준을 입력합니다.(내림차순)

include::{snippets}/shop/radius/sort/query-parameters.adoc[]

- rating (별점 기준)

- review (리뷰 갯수 순)

- follow (유저 찜 순)

==== Request-Field
include::{snippets}/shop/radius/sort/request-fields.adoc[]
* x (경도)
- ex) 127.128371
* y (위도)
- ex) 35.123912
* page 1부터 ~

==== Response
include::{snippets}/shop/radius/sort/response-body.adoc[]

=== 반경 1km 내 전체 조회 API
* 내 주변 1km 내 음식점을 전체 조회하는 API 입니다.

==== Request

include::{snippets}/shop/radius/all/http-request.adoc[]

==== Response

include::{snippets}/shop/radius/all/http-response.adoc[]

=== 음식점 세부 조회 API
* 음식점의 세부 페이지 조회할 때 사용하는 API 입니다.

==== Path-Parameter
include::{snippets}/shop/detail/path-parameters.adoc[]
==== query-Parameter
include::{snippets}/shop/detail/query-parameters.adoc[]
* sortType
- newest (최신 순)
- oldest (오래된 순)
* reviewType
- onlyPictures (사진만 있는 리뷰)
- onlyText (텍스트만 있는 리뷰)
- based (default)
* page 1부터 ~

==== Request
include::{snippets}/shop/detail/http-request.adoc[]
==== Response
include::{snippets}/shop/detail/http-response.adoc[]
* 해당 음식점의 정보와 리뷰, 평점, 평가 등을 리턴합니다.

=== 음식점 이미지 추가 요청 API
* 음식점의 이미지를 추가로 요청하는 API 입니다.

==== Path-Parameter
include::{snippets}/shop/images/path-parameters.adoc[]

==== Query-Parameter
include::{snippets}/shop/images/query-parameters.adoc[]

==== Request
include::{snippets}/shop/images/http-request.adoc[]
==== Response
include::{snippets}/shop/images/http-response.adoc[]
* 이미지 경로
- 해당 list 처럼 member_id와 UUID로 생성된 ID를 통해 경로를 생성하고, 해당 이미지의 확장자를 통해 경로를 지정합니다.